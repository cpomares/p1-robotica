



<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copiar al portapapeles">
      
        <meta name="lang:clipboard.copied" content="Copiado al portapapeles">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No se encontraron documentos">
      
        <meta name="lang:search.result.one" content="1 documento encontrado">
      
        <meta name="lang:search.result.other" content="# documentos encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Práctica 7: Punteros y memoria dinámica - P1 Robótica</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#009688">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#practica-7-punteros-y-memoria-dinamica" tabindex="1" class="md-skip">
        Saltar a contenido
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="P1 Robótica" class="md-header-nav__button md-logo">
          
            <img src="../../imagenes/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              P1 Robótica
            </span>
            <span class="md-header-nav__topic">
              
                Práctica 7: Punteros y memoria dinámica
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Teclee para comenzar búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="P1 Robótica" class="md-nav__button md-logo">
      
        <img src="../../imagenes/logo.png" width="48" height="48">
      
    </a>
    P1 Robótica
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Teoría
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Teoría
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Teoria/tema00-descripcion-asignatura/tema00-descripcion-asignatura.html" title="Tema 0: Descripción de la asignatura" class="md-nav__link">
      Tema 0: Descripción de la asignatura
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Teoria/tema01-introduccion-a-la-programacion/tema01-introduccion-a-la-programacion.html" title="Tema 1: Introducción a la programación" class="md-nav__link">
      Tema 1: Introducción a la programación
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Teoria/tema02-tipos-de-datos-simples/tema02-tipos-de-datos-simples.html" title="Tema 2: Tipos de datos simples" class="md-nav__link">
      Tema 2: Tipos de datos simples
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Prácticas
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Prácticas
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../practica00/practica00.html" title="Práctica 0: Entorno Linux y herramientas" class="md-nav__link">
      Práctica 0: Entorno Linux y herramientas
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#memoria-dinamica-en-funciones" title="Memoria dinámica en funciones" class="md-nav__link">
    Memoria dinámica en funciones
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejercicio-1" title="Ejercicio 1" class="md-nav__link">
    Ejercicio 1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejercicio-2" title="Ejercicio 2" class="md-nav__link">
    Ejercicio 2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejercicio-3" title="Ejercicio 3" class="md-nav__link">
    Ejercicio 3
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="practica-7-punteros-y-memoria-dinamica">Práctica 7: Punteros y memoria dinámica<a class="headerlink" href="#practica-7-punteros-y-memoria-dinamica" title="Permanent link">&para;</a></h1>
<p><strong>Duración</strong>: 2 semanas</p>
<h2 id="memoria-dinamica-en-funciones">Memoria dinámica en funciones<a class="headerlink" href="#memoria-dinamica-en-funciones" title="Permanent link">&para;</a></h2>
<p>Cuando pasamos un array o puntero como parámetro a una función, estamos pasando la dirección de memoria del primer elemento del array, pero no al puntero en sí, que es una copia. Es decir, no podríamos modificar dinámicamente su memoria porque no tenemos una referencia a la misma.</p>
<p>Es decir, si sólo queremos trabajar con los elementos, lo haríamos como hemos hecho hasta ahora. Pero si dentro de una función queremos modificar la memoria dinámicamente (usando <code>malloc</code>, <code>realloc</code>, etc) necesitamos pasar el array o puntero por referencia.</p>
<p>Ejemplo:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">#define TAM 20</span>

<span class="kt">void</span> <span class="nf">creaVector</span><span class="p">(</span><span class="kt">int</span> <span class="o">**</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="kt">int</span> <span class="o">*</span><span class="n">vector</span><span class="p">;</span>

   <span class="c1">// Reservamos la memoria</span>
   <span class="n">creaVector</span><span class="p">(</span><span class="o">&amp;</span><span class="n">vector</span><span class="p">);</span>
   <span class="n">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">//Rellenamos al azar</span>
   <span class="n">vector</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
   <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Pos 2: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">vector</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span> <span class="c1">//Comprobamos</span>

   <span class="c1">// Liberamos memoria</span>
   <span class="n">free</span><span class="p">(</span><span class="n">vector</span><span class="p">);</span>
   <span class="n">vector</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>

   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">creaVector</span><span class="p">(</span><span class="kt">int</span> <span class="o">**</span><span class="n">v</span><span class="p">)</span> <span class="p">{</span>
   <span class="o">*</span><span class="n">v</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="o">*</span> <span class="n">TAM</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Podéis ampliar esta explicación en el apartado <a href="(https://cpomares.github.io/p1-robotica/Teoria/tema07-punteros-y-memoria-dinamica/tema07-punteros-y-memoria-dinamica.html#3-punteros-y-funciones)">Punteros y funciones</a> del tema 7 de los apuntes.</p>
<h2 id="ejercicio-1">Ejercicio 1<a class="headerlink" href="#ejercicio-1" title="Permanent link">&para;</a></h2>
<p>A partir de la solución que os proporcionamos del ejercicio 5 de la práctica 5, modifica el programa para que permita realizar la suma de números binarios de cualquier número de dígitos, en lugar de estar restringidos a una longitud máxima de 8 bits.</p>
<p>Intenta realizar los mínimos cambios posibles. Para ello, usa esta nueva definición del tipo <code>TPalabra</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">typedef</span> <span class="kt">char</span><span class="o">*</span> <span class="n">TPalabra</span><span class="p">;</span>
</pre></div>
</td></tr></table>

<p>y utiliza las mismas funciones ya implementadas, modificando si es necesario los prototipos de algunas de ellas y su definición. Puedes añadir alguna otra función si lo consideras conveniente.</p>
<p>Ejemplos de ejecución:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>Introduce palabra de bits: 1000101010101010101010101010100000001
Introduce palabra de bits: 10101000000101010101010


     1000101010101010101010101010100000001
   + 0000000000000010101000000101010101010
     -------------------------------------
     1000101010101101010010101111110101011

Introduce palabra de bits: 1101000111110001010111
Introduce palabra de bits: 1100010000000010000110


     1101000111110001010111
   + 1100010000000010000110
     ----------------------
    11001010111110011011101


Introduce palabra de bits: f
Fin del programa
</pre></div>
</td></tr></table>

<h2 id="ejercicio-2">Ejercicio 2<a class="headerlink" href="#ejercicio-2" title="Permanent link">&para;</a></h2>
<p>A partir del programa implementado en el ejercicio anterior, modifícalo para que utilice esta nueva definición del tipo <code>TPalabra</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">bits</span><span class="p">;</span>
    <span class="kt">int</span>  <span class="n">lon</span><span class="p">;</span>
<span class="p">}</span> <span class="n">TPalabra</span><span class="p">;</span>
</pre></div>
</td></tr></table>

<h2 id="ejercicio-3">Ejercicio 3<a class="headerlink" href="#ejercicio-3" title="Permanent link">&para;</a></h2>
<p>Modifica el ejercicio 3 de la práctica 5 utilizando memoria dinámica, de forma que las filas del calendario sólo se creen cuando se necesiten y no quede ninguna vacía. Utiliza las siguientes definiciones:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">#define COL 7</span>

<span class="k">typedef</span> <span class="kt">int</span> <span class="n">TFilaCalendario</span><span class="p">[</span><span class="n">COL</span><span class="p">];</span>
<span class="k">typedef</span> <span class="n">TFilaCalendario</span> <span class="o">*</span><span class="n">TCalendario</span><span class="p">;</span>
</pre></div>
</td></tr></table>

<p>Ahora el tipo <code>TCalendario</code> es un array dinámico de tipo <code>TFilaCalendario</code> (que a su vez es un array estático de 7 elementos).</p>
<p>Si partes de la solución que os proporcionamos, sólo debes modificar dos funciones además del <code>main()</code>. Es posible que debas modificar el prototipo de alguna más, puedes hacerlo, pero modificando mínimamente su código.</p>
<p>Ejemplos de ejecución:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>Introduce mes: 10
Introduce año: 2020

 LUN MAR MIE JUE VIE SAB DOM

   .   .   .   1   2   3   4
   5   6   7   8   9  10  11
  12  13  14  15  16  17  18
  19  20  21  22  23  24  25
  26  27  28  29  30  31   .
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>Introduce mes: 11
Introduce año: 2020

 LUN MAR MIE JUE VIE SAB DOM

   .   .   .   .   .   .   1
   2   3   4   5   6   7   8
   9  10  11  12  13  14  15
  16  17  18  19  20  21  22
  23  24  25  26  27  28  29
  30   .   .   .   .   .   .
</pre></div>
</td></tr></table>

<hr />
<p>Programación 1, Grado de Robótica, curso 2019-20<br />
© Departamento Ciencia de la Computación e Inteligencia Artificial, Universidad de Alicante<br />
Antonio Botía, Cristina Pomares</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>